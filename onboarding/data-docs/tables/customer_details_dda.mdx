---
title: 'Table: Customer Details'
description: 'Working with the `obt_customers` table in BigQuery'
icon: 'user'
---

The **Customer Details** table (`obt_customers`) provides a comprehensive view of each customer with their lifetime metrics, acquisition source, and behavioral attributes. This is your primary table for customer-centric analysis.

## When to Use This Table

<CardGroup cols={2}>
  <Card title="Customer Analytics" icon="user-magnifying-glass">
    Analyze customer lifetime value, purchase frequency
  </Card>
  <Card title="Acquisition Analysis" icon="funnel-dollar">
    Understand which channels acquire the best customers
  </Card>
  <Card title="Segmentation" icon="users-rectangle">
    Build customer segments based on behavior
  </Card>
  <Card title="Retention Analysis" icon="rotate">
    Measure repeat purchase rates and churn
  </Card>
</CardGroup>

## Key Columns

| Column | Description |
|--------|-------------|
| `sm_customer_key` | Unique customer identifier (use for joins) |
| `customer_email_hashed` | Hashed email for matching |
| `customer_lifetime_net_revenue` | Total revenue from this customer |
| `customer_lifetime_order_count` | Total orders placed |
| `customer_first_order_date` | Date of first purchase |
| `customer_latest_order_date` | Date of most recent purchase |
| `customer_acquisition_channel` | Channel of first order |
| `customer_tags_csv` | Customer tags from your platform |

## Example Queries

### Customer Lifetime Value Distribution
```sql
SELECT
  CASE
    WHEN customer_lifetime_net_revenue < 100 THEN '$0-99'
    WHEN customer_lifetime_net_revenue < 250 THEN '$100-249'
    WHEN customer_lifetime_net_revenue < 500 THEN '$250-499'
    ELSE '$500+'
  END AS ltv_bucket,
  COUNT(*) AS customer_count,
  SUM(customer_lifetime_net_revenue) AS total_ltv
FROM `your_project.sm_transformed_v2.obt_customers`
WHERE customer_lifetime_order_count >= 1
GROUP BY ltv_bucket
ORDER BY MIN(customer_lifetime_net_revenue)
```

### Acquisition Channel Performance
```sql
SELECT
  customer_acquisition_channel,
  COUNT(*) AS customers_acquired,
  AVG(customer_lifetime_net_revenue) AS avg_ltv,
  AVG(customer_lifetime_order_count) AS avg_orders
FROM `your_project.sm_transformed_v2.obt_customers`
WHERE customer_first_order_date >= DATE_SUB(CURRENT_DATE(), INTERVAL 365 DAY)
GROUP BY customer_acquisition_channel
ORDER BY customers_acquired DESC
```

### Repeat Purchase Rate
```sql
SELECT
  COUNT(*) AS total_customers,
  COUNTIF(customer_lifetime_order_count >= 2) AS repeat_customers,
  SAFE_DIVIDE(COUNTIF(customer_lifetime_order_count >= 2), COUNT(*)) * 100 AS repeat_rate_pct
FROM `your_project.sm_transformed_v2.obt_customers`
WHERE customer_first_order_date >= DATE_SUB(CURRENT_DATE(), INTERVAL 365 DAY)
```

### Recently Active Customers
```sql
SELECT
  sm_customer_key,
  customer_email_hashed,
  customer_lifetime_order_count,
  customer_lifetime_net_revenue,
  customer_latest_order_date
FROM `your_project.sm_transformed_v2.obt_customers`
WHERE customer_latest_order_date >= DATE_SUB(CURRENT_DATE(), INTERVAL 30 DAY)
ORDER BY customer_lifetime_net_revenue DESC
LIMIT 100
```

## Related Resources

<CardGroup cols={2}>
  <Card title="Full Table Schema" icon="table" href="/data-activation/data-tables/sm_transformed_v2/obt_customers">
    Complete column documentation
  </Card>
  <Card title="Order Details Table" icon="bag-shopping" href="/onboarding/data-docs/tables/order_details_dda">
    For order-level analysis
  </Card>
  <Card title="Dimension Definitions" icon="filter" href="/onboarding/data-docs/dimensions">
    Understanding dimension columns
  </Card>
</CardGroup>
