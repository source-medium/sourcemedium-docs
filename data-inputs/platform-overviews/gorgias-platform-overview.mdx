## Overview

The Customer Support data models provide analytics-ready transformations of your [Gorgias](https://www.gorgias.com/) customer support platform data in BigQuery. These models enable you to track, analyze, and visualize your customer support performance through our  [pre-built dashboard template](https://lookerstudio.google.com/s/iEvv2YdLPiM) or custom analysis via SQL.

The integration transforms your raw Gorgias data into a structured, optimized format that follows SourceMedium's unified data model approach, ensuring consistent metrics definitions across all customer support platforms.

<iframe width="560" height="315" src="https://www.youtube.com/embed/RtJ0MWYsIuU?si=1v8R3xTotqpTZiT1" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>

## Data Location

All Customer Support data is available in your BigQuery instance under:
```
[sm-{{ company_id }}].[sm_experimental].obt_customer_support_tickets*
```
NOTE that this will eventually be moved to `sm_transformed_v2` dataset once the schema is more finalized.

The primary reporting table is `obt_customer_support_tickets`, which contains all metrics needed for dashboard visualizations.

## Key Metrics

The Customer Support data models track several key performance indicators:

### Ticket Performance
- **Average Resolution Time**: The average time (in hours) between ticket creation and resolution
- **One-Touch Resolution Rate**: Percentage of tickets resolved with a single agent interaction
- **Open Tickets**: Total number of tickets currently open
- **Resolution Distribution**: Distribution of tickets by resolution time (0-3 hours, 3-6 hours, etc.)

### Customer Satisfaction
- **CSAT Score**: Average customer satisfaction rating (1-5 scale)
- **CSAT Rating Distribution**: Breakdown of tickets by satisfaction rating
- **CSAT Survey Response Rate**: Percentage of closed tickets with completed CSAT surveys

### Volume & Channel Analysis
- **Tickets by Channel**: Distribution across channels (email, chat, social media, etc.)
- **Tickets Created/Closed**: Total tickets created/closed in the selected period
- **Messages per Ticket**: Average number of messages exchanged per ticket

## Key Tables & Fields

### obt_customer_support_tickets

The primary reporting table for customer support analysis.

| Field | Description |
|-------|-------------|
| `sm_store_id` | SourceMedium Customer ID |
| `source_system` | The system where the ticket originated (e.g., "gorgias") |
| `ticket_source` | The source from which the ticket originated |
| `ticket_channel` | The communication channel (email, chat, social, etc.) |
| `ticket_created_at_local_datetime` | Local datetime when the ticket was created |
| `ticket_closed_at_local_datetime` | Local datetime when the ticket was closed |
| `tickets_created` | Count of tickets created (1 or 0) |
| `tickets_closed` | Count of tickets closed (1 or 0) |
| `one_touch_tickets` | Whether the ticket was resolved in a single interaction |
| `ticket_resolution_time_hours` | Time taken to resolve the ticket in hours |

### dim_customer_support_tickets

Detailed dimension table containing ticket attributes and metadata.

| Field | Description |
|-------|-------------|
| `ticket_id` | Unique identifier for the ticket |
| `ticket_external_id` | External identifier used in Gorgias |
| `ticket_created_at` | UTC timestamp when the ticket was created |
| `ticket_closed_at` | UTC timestamp when the ticket was closed |
| `ticket_subject` | The subject line of the ticket |
| `ticket_status` | Current status of the ticket (open, closed, pending) |
| `ticket_priority` | Priority level assigned to the ticket |
| `ticket_channel` | Communication channel used |
| `ticket_assignee_email` | Email of the agent assigned to the ticket |

## Dashboard Capabilities

The pre-built SourceMedium dashboard for Customer Support enables you to:

1. **Filter data** by time period, channel, resolution time, and CSAT score
2. **Monitor key metrics** through time-series visualizations
3. **Analyze ticket resolution** by channel and time buckets
4. **Track CSAT performance** and identify trends
5. **Export data** for further analysis

## Common Use Cases

### For Dashboard Users

1. **Performance Monitoring**: Track customer support team efficiency with resolution time and one-touch resolution metrics
2. **Channel Analysis**: Identify which support channels have the highest volume and best resolution rates
3. **Customer Satisfaction**: Monitor CSAT scores across channels and agents
4. **SLA Compliance**: Track tickets against resolution time targets

### For Data Engineers

1. **Custom Reporting**: Build specialized reports using the underlying fact and dimension tables
2. **Data Integration**: Join customer support data with other business metrics
3. **Custom Metrics**: Define and calculate additional KPIs beyond the pre-built dashboard
4. **Historical Analysis**: Analyze trends and patterns in customer support performance over time

## Data Refresh Schedule

The Gorgias data is updated daily through an automated ETL pipeline. The latest data available will typically represent activity from the previous day.

## Notes & Additional Resources

### Debug Considerations for Engineers

1. Export all Gorgias tickets by creating a Private view with no filters. [Instructions can be found here](https://docs.gorgias.com/en-US/exports-404844)
2. Compare Ticket IDs available in the Gorgias exported tickets to the Ticket IDs available in the `dim_customer_support_tickets` table.

### Additional Tickets in Warehouse

Due to API limitations tickets that have been fully deleted from the Gorgias platform will still be visible and included in the reporting and fct/dim data models.

### Discrepancies vs. Gorgias internal analytics

You may notice discrepancies for day-over-day and aggregated metrics versus the Source Medium calculated metrics. This is due to the method of aggregation utilized by Gorgias for their in-platform and API-provided analytics. Another factor that may cause discrepancies are user-account timezone settings. This is because Gorgias' in-platform analytics aggregates based on the timezone set for the user viewing them, whereas Source Medium aggregates based on your e-commerce platform native timezone. Gorgias provides excellent documentation and visualizations on how they calculate their analytics figures, which can be [found here](https://docs.gorgias.com/en-US/how-metrics-are-calculated-406747).


### Resources
- [SourceMedium Documentation](https://docs.sourcemed.com/)
- [Gorgias API Reference](https://developers.gorgias.com/reference/introduction)
- [BigQuery SQL Reference](https://cloud.google.com/bigquery/docs/reference/standard-sql/query-syntax)

---

For any questions about these data models or to request additional features, please contact SourceMedium support in our shared Slack or Google Chat channels.
